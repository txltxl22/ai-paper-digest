<!-- Mobile-Responsive Header -->
<header>
  <div class="header-left">
    <h1>
      {% if show_back_link %}
        <a href='{{ url_for("index_page.index") }}'>â† è¿”å›åˆ—è¡¨</a>
      {% else %}
        <a href='{{ url_for("index_page.index") }}'>ğŸ“š arXivæœ€æ–°AIè®ºæ–‡é€Ÿè§ˆé€Ÿå­¦</a>
      {% endif %}
    </h1>
  </div>
  
  <!-- Desktop Navigation -->
  <div class="page-header-right desktop-nav">
    {% if uid and not show_back_link %}
      <a href="{{ url_for('index_page.read_papers') }}" class="nav-btn">å·²è¯»è®ºæ–‡</a>
      <a href="{{ url_for('index_page.favorite_papers') }}" class="nav-btn">æ”¶è—è®ºæ–‡</a>
      {% if uid in admin_users %}
      <button id='admin-fetch-btn' class="nav-btn admin-btn" title="è·å–æœ€æ–°è®ºæ–‡æ‘˜è¦">è·å–æœ€æ–°</button>
      <a href="{{ url_for('visitor_stats.stats_dashboard') }}" class="nav-btn" title="è®¿é—®ç»Ÿè®¡">è®¿é—®ç»Ÿè®¡</a>
      {% endif %}
      <span class="user-chip">{{ uid }}</span>
      <button id='logout-btn' class="nav-btn logout-btn">é€€å‡º</button>
    {% elif not show_back_link %}
      <form id='user-form' method='POST' action='{{ url_for("user_management.set_user") }}' class="login-form">
        <input name='uid' placeholder='è¾“å…¥ç”¨æˆ·å' required class="login-input">
        <button type='submit' class="nav-btn login-btn">è¿›å…¥</button>
      </form>
    {% endif %}
    
    <button id="theme-toggle" class="theme-btn" type="button" aria-label="åˆ‡æ¢ä¸»é¢˜" title="åˆ‡æ¢ä¸»é¢˜" data-icon-light="ğŸŒ™" data-icon-dark="â˜€ï¸">ğŸŒ™</button>
  </div>

  <!-- Mobile Menu Button -->
  <button id="mobile-menu-toggle" class="mobile-menu-btn" aria-label="æ‰“å¼€èœå•" title="æ‰“å¼€èœå•">
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
  </button>
</header>

<!-- Mobile Navigation Overlay -->
<div id="mobile-nav-overlay" class="mobile-nav-overlay">
  <div class="mobile-nav-content">
    <div class="mobile-nav-header">
      <h2>èœå•</h2>
      <button id="mobile-nav-close" class="mobile-nav-close" aria-label="å…³é—­èœå•">Ã—</button>
    </div>
    
    <div class="mobile-nav-body">
      {% if uid and not show_back_link %}
        <a href="{{ url_for('index_page.read_papers') }}" class="mobile-nav-item">
          <span class="nav-icon">ğŸ“–</span>
          <span class="nav-text">å·²è¯»è®ºæ–‡</span>
        </a>
        <a href="{{ url_for('index_page.favorite_papers') }}" class="mobile-nav-item">
          <span class="nav-icon">â­</span>
          <span class="nav-text">æ”¶è—è®ºæ–‡</span>
        </a>
        {% if uid in admin_users %}
        <button id='mobile-admin-fetch-btn' class="mobile-nav-item mobile-nav-btn">
          <span class="nav-icon">ğŸ”„</span>
          <span class="nav-text">è·å–æœ€æ–°</span>
        </button>
        <a href="{{ url_for('visitor_stats.stats_dashboard') }}" class="mobile-nav-item">
          <span class="nav-icon">ğŸ“Š</span>
          <span class="nav-text">è®¿é—®ç»Ÿè®¡</span>
        </a>
        {% endif %}
        <div class="mobile-nav-divider"></div>
        <div class="mobile-nav-item mobile-user-info">
          <span class="nav-icon">ğŸ‘¤</span>
          <span class="nav-text">{{ uid }}</span>
        </div>
        <button id='mobile-logout-btn' class="mobile-nav-item mobile-nav-btn mobile-logout-btn">
          <span class="nav-icon">ğŸšª</span>
          <span class="nav-text">é€€å‡º</span>
        </button>
      {% elif not show_back_link %}
        <form id='mobile-user-form' method='POST' action='{{ url_for("user_management.set_user") }}' class="mobile-login-form">
          <div class="mobile-nav-item mobile-login-item">
            <span class="nav-icon">ğŸ‘¤</span>
            <input name='uid' placeholder='è¾“å…¥ç”¨æˆ·å' required class="mobile-login-input">
          </div>
          <button type='submit' class="mobile-nav-item mobile-nav-btn mobile-login-btn">
            <span class="nav-icon">ğŸš€</span>
            <span class="nav-text">è¿›å…¥</span>
          </button>
        </form>
      {% endif %}
      
      <div class="mobile-nav-divider"></div>
      <button id="mobile-theme-toggle" class="mobile-nav-item mobile-nav-btn">
        <span class="nav-icon">ğŸŒ™</span>
        <span class="nav-text">åˆ‡æ¢ä¸»é¢˜</span>
      </button>
    </div>
  </div>
</div>
