<!-- Pagination Component -->
{% if total_pages and total_pages > 1 %}
<nav class="pagination" aria-label="分页导航">
  {% set base_endpoint = 'read_papers' if show_read else 'index' %}
  {% set qs = [] %}
  {% if active_tag %}{% set _ = qs.append('tag=' ~ active_tag) %}{% endif %}
  {% if tag_query %}{% set _ = qs.append('q=' ~ tag_query) %}{% endif %}
  {% if active_tops %}
    {% for t in active_tops %}{% set _ = qs.append('top=' ~ t) %}{% endfor %}
  {% endif %}
  {% set _ = qs.append('per_page=' ~ per_page) %}
  {% set common = '&'.join(qs) %}
  {% if common %}{% set common = common ~ '&' %}{% endif %}

  <a class="page-btn {% if page <= 1 %}disabled{% endif %}"
     href="{{ url_for(base_endpoint) }}?{{ common }}page={{ 1 }}">« 首页</a>
  <a class="page-btn {% if page <= 1 %}disabled{% endif %}"
     href="{{ url_for(base_endpoint) }}?{{ common }}page={{ page - 1 if page > 1 else 1 }}">‹ 上一页</a>
  <span class="page-info">第 <strong>{{ page }}</strong> / {{ total_pages }} 页（共 {{ total_items }} 篇）</span>
  <a class="page-btn {% if page >= total_pages %}disabled{% endif %}"
     href="{{ url_for(base_endpoint) }}?{{ common }}page={{ page + 1 if page < total_pages else total_pages }}">下一页 ›</a>
  <a class="page-btn {% if page >= total_pages %}disabled{% endif %}"
     href="{{ url_for(base_endpoint) }}?{{ common }}page={{ total_pages }}">末页 »</a>
</nav>
{% endif %}
